---
title: "1.2 Growing season"
author: "Dr. Chih-Yu Hung"
date: "2025-02-17"
output: html_document
---

```{r setup, include=FALSE}
library(tidyverse)
library(data.table)

Temp <- read_csv("Climate Normals/Monthly_Temp_perCounty_19812010.csv")

Pre <- read_csv("Climate Normals/Monthly_Pre_perCounty_19812010.csv")

Pet <- read_csv("Climate Normals/Monthly_Pet_perCounty_19812010.csv")


```


## Growing season for crop and States

This document will decide the growing season for crop and States. Please note that growing season in Canada is between May-Oct. However, US has double cropping. Growing season for double cropping could from April to September and Oct to March for winter crops. 


I'm using 10C (50F) Avg. month temperature as the first month of growing season. Two references below. 
https://www.epa.gov/climate-indicators/climate-change-indicators-growing-degree-days
https://extension.psu.edu/understanding-growing-degree-days


```{r determining growing season}
# If April’s mean temp >= 10, growing season = Apr–Sep; otherwise May–Oct
grow_season <- Temp %>%
  filter(month == 4) %>%
  mutate(
    start_month = if_else(mean_val >= 10, 4, 5),
    end_month   = start_month + 5            # Apr–Sep => 4–9; May–Oct => 5–10
  ) %>%
  select(County, State, start_month, end_month)




```





```{r}
#Growing season 
column_names <- colnames(Temp)
Growing_season <- column_names[grepl(".*(198[1-9]|199[0-9]|200[0-9]|2010).*(05|06|07|08|09|10)$", column_names)]

#Table with growing seasons
numeric_columns <- Temp %>%
  select(all_of(Growing_season))

# Calculate the average of the numeric columns
US_Temp$Temp_grow <- rowMeans(numeric_columns, na.rm = TRUE)




# #Growing season 
# column_names <- colnames(Pre) 
# Growing_season <- column_names[grepl(".*(198[1-9]|199[0-9]|200[0-9]|2010).*(05|06|07|08|09|10)$", column_names)]
# 
# #Table with growing seasons
# numeric_columns <- Pre %>% 
#   select(all_of(Growing_season))
# 
# # Calculate the average of the numeric columns
# US_Pre$Pre_grow <- rowSums(numeric_columns, na.rm = TRUE)/30




# #Growing season 
# column_names <- colnames(Pre) 
# Growing_season <- column_names[grepl(".*(198[1-9]|199[0-9]|200[0-9]|2010).*(05|06|07|08|09|10)$", column_names)]
# 
# #Table with growing seasons
# numeric_columns <- Pre %>% 
#   select(all_of(Growing_season))
# 
# # Calculate the average of the numeric columns
# US_Pre$Pre_grow <- rowSums(numeric_columns, na.rm = TRUE)/30

```